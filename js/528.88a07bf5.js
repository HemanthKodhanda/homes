"use strict";(self["webpackChunkmapmark"]=self["webpackChunkmapmark"]||[]).push([[528],{2528:(e,o,t)=>{t.r(o),t.d(o,{default:()=>D});var i=t(3673),n=t(8880);const a={class:"q-pa-md"},s={class:"q-gutter-md row items-start"},r={class:"p-pa-md"};function p(e,o,t,p,l,d){const c=(0,i.up)("q-icon"),g=(0,i.up)("q-btn"),m=(0,i.up)("q-input"),h=(0,i.up)("q-form"),O=(0,i.up)("GoogleMapMarker"),u=(0,i.up)("GoogleMapLoader"),w=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(w,{padding:""},{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i.Wm)(h,{onSubmit:(0,n.iM)(d.onSubmit,["prevent"])},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Wm)(m,{filled:"","bottom-slots":"",modelValue:l.zip,"onUpdate:modelValue":o[0]||(o[0]=e=>l.zip=e),label:"Enter Zip Code",maxlength:"12",dense:l.dense},{prepend:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"place"})])),after:(0,i.w5)((()=>[(0,i.Wm)(g,{round:"",dense:"",flat:"",icon:"search",onClick:d.onSubmit},null,8,["onClick"])])),_:1},8,["modelValue","dense"])])])),_:1},8,["onSubmit"])]),(0,i._)("div",r,[l.renderComponent?((0,i.wg)(),(0,i.j4)(u,{key:0,mapOptions:d.mapOptions,apiKey:l.apiKey},{default:(0,i.w5)((({google:e,map:o,infowindow:t})=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.savedLocations,(n=>((0,i.wg)(),(0,i.j4)(O,{key:n.id,marker:n,google:e,map:o,infowindow:t},null,8,["marker","google","map","infowindow"])))),128))])),_:1},8,["mapOptions","apiKey"])):(0,i.kq)("",!0)])])),_:1})}var l=t(5474),d=t(6249);t(6394);(0,i.dD)("data-v-8799c05c");const c={class:"google-map",ref:"googleMap"};function g(e,o,t,n,a,s){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",c,null,512),Boolean(this.google)&&Boolean(this.map)?(0,i.WI)(e.$slots,"default",{key:0,google:a.google,map:a.map,infowindow:a.infowindow},void 0,!0):(0,i.kq)("",!0)])}(0,i.Cn)();var m=t(1029);const h={props:{mapOptions:Object,apiKey:String},data(){return{google:null,map:null,infowindow:null}},async mounted(){try{const e=new m.a({apiKey:"AIzaSyAGkjfXDMdSjiIgFoRRAdX7nBYlXXQh6uM",version:"weekly",libraries:["places"]});this.map=null,this.google=e,this.initializeMap()}catch(e){console.log(e)}},methods:{initializeMap(){const e=this.$refs.googleMap;this.google.load().then((()=>{this.map=new google.maps.Map(e,this.mapOptions),this.infowindow=new google.maps.InfoWindow}))}}};h.render=g,h.__scopeId="data-v-8799c05c";const O=h,u={COLOR_POINT:"rgb(233, 30, 99)",COLOR_POINT_FILL:"rgb(255,255,255)",COLOR_LANDSCAPE:"#FFAD00",COLOR_BORDERS:"rgb(195,230,255)",COLOR_LINE:"rgb(255,255,255)",COLOR_SELECTED_POINT:"rgb(0,184,83)",COLOR_BROWN:"rgb(139,69,19)",COLOR_BLACK:"rgb(0,0,0)",COLOR_BLUE:"rgb(77,109,155)",COLOR_LIGHT_BLUE:"rgb(124,156,201)",COLOR_WHITE:"rgb(255,255,255)",COLOR_WHITEY:"rgb(240,240,240)",COLOR_GREEN:"rgb(0,155,77)",COLOR_TOMATO:"rgb(243,114,114)"},{COLOR_LANDSCAPE:w,COLOR_BORDERS:C,COLOR_WATER:L,COLOR_LINE:k,COLOR_POINT_FILL:_,COLOR_SELECTED_POINT:b}=u,y={BORDERS:C,LANDSCAPE:w,LINE:k,POINT:b,POINT_FILL:_,WATER:L},f={path:"M 0, 0 m -5, 0 a 5,5 0 1,0 10,0 a 5,5 0 1,0 -10,0",strokeOpacity:.7,strokeWeight:4,strokeColor:"rgb(233, 30, 99)",fillColor:y.POINT_FILL,fillOpacity:.7,scale:1},R={path:"M 0,-2 0,2",strokeOpacity:1,strokeWeight:2,scale:1},I=(y.LINE,{clickableIcons:!0,streetViewControl:!0,panControlOptions:!0,gestureHandling:"greedy",mapTypeControl:!0}),E={props:{google:{type:Object,required:!0},map:{type:Object,required:!0},marker:{type:Object,required:!0},infowindow:{type:Object,requried:!0}},mounted(){const e='<div id="content"><div id="bodyContent"><img src="/homes/home1.png" width="100px""height="150px"><p>'+this.marker.title+"</p></div></div>",o=new google.maps.Marker({position:this.marker.position,marker:this.marker,map:this.map,icon:f,title:"MyHome"});o.addListener("click",(()=>{this.infowindow.setContent(e),this.infowindow.open({anchor:o,map:this.map,shouldFocus:!1})}))},render(){}},v=E;var M=t(5556);const S={components:{GoogleMapLoader:O,GoogleMapMarker:v},data(){return{savedLocations:[],apiKey:"AIzaSyAGkjfXDMdSjiIgFoRRAdX7nBYlXXQh6uM",dense:!1,zip:null,center:{lat:39,lng:-95},centerPosition:{lat:39,lng:-95},markerOptions:{position:{},label:"H",title:"Sweet Home"},markers:[],address:null,points:null,zoom:12,times:0,renderComponent:!0,pos:null}},async created(){this.renderComponent=!1,d.Z.show(),this.pos=await M.b.getCurrentPosition(),this.center={lat:parseFloat(this.pos.coords.latitude),lng:parseFloat(this.pos.coords.longitude)},this.centerPosition={lat:parseFloat(this.pos.coords.latitude),lng:parseFloat(this.pos.coords.longitude)},this.renderComponent=!0,d.Z.hide()},methods:{onSubmit(){null==this.zip?this.$q.notify({position:"top",color:"red-5",textColor:"white",icon:"warning",message:"Please enter zip"}):(this.getZipgeocodes(),this.getLocation())},async getLocation(){d.Z.show(),this.renderComponent=!1,await l.api.get("/locations/"+this.zip).then((e=>{0!==e.data.length?(this.zoom=14,this.savedLocations=[],this.markerOptions={},e.data.forEach((e=>{this.markerOptions={},this.center={lat:parseFloat(e.latitude),lng:parseFloat(e.langitude)},this.markerOptions.position=this.center,this.markerOptions.id=e._id,this.markerOptions.title=e.street+e.city+e.state+e.zip+e.comment,this.savedLocations.push(this.markerOptions)}))):this.$q.notify({position:"top",color:"amber-5",textColor:"white",icon:"warning",message:"No locations available"})})).catch((e=>{console.log(e),this.$q.notify({position:"top",color:"red-5",textColor:"white",icon:"warning",message:"Error getting location, pelase contact admin."})})),this.renderComponent=!0,d.Z.hide()},async getZipgeocodes(){this.centerPositon={},await l.api.get("https://maps.googleapis.com/maps/api/geocode/json?address="+this.zip+"&key="+this.apiKey).then((e=>{this.center=e.data.results[0].geometry.location})).catch((e=>{console.log(e)}))}},computed:{mapOptions(){return{...I,center:this.mapCenter,zoom:this.zoom}},mapCenter(){return this.center}}};var N=t(4379),T=t(8689),A=t(6805),P=t(4554),q=t(4607),z=t(7518),F=t.n(z);S.render=p;const D=S;F()(S,"components",{QPage:N.Z,QForm:T.Z,QInput:A.Z,QIcon:P.Z,QBtn:q.Z})}}]);